<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart - Cryptotech X</title>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" as="style">
    <link rel="preload" href="https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiJ-Ek-_EeA.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        @font-face {
            font-family: 'Inter';
            font-style: normal;
            font-weight: 300 700;
            font-display: swap;
            src: url(https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiJ-Ek-_EeA.woff2) format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
        }
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(180deg, #0B0B1E 0%, #0F1A33 35%, #000000 70%);
            min-height: 100vh;
        }
        .gradient-text {
            background: linear-gradient(135deg, #3DB8F5 0%, #2CA8E5 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .logo-text {
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            letter-spacing: -0.03em;
            font-feature-settings: "ss01", "ss02", "cv01";
        }
        .payment-option {
            background: rgba(15, 26, 51, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(61, 184, 245, 0.2);
            transition: all 0.3s ease;
        }
        .payment-option:hover {
            border-color: rgba(61, 184, 245, 0.4);
            transform: translateY(-2px);
        }
        .payment-option.selected {
            border-color: #3DB8F5;
            background: rgba(15, 26, 51, 0.5);
        }
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
            padding: 0.5rem 1rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
        }
        .nav-link:hover {
            color: white;
            transform: translateY(-2px);
        }
        .nav-link.active {
            color: white;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, #3DB8F5 0%, #2CA8E5 100%);
            transition: width 0.3s ease;
        }
        .nav-link:hover::after {
            width: 80%;
        }
        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(11, 11, 30, 0.6);
            border: 1px solid rgba(61, 184, 245, 0.5);
            padding: 12px 24px;
            border-radius: 6px;
            color: #fff;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        .download-btn:hover {
            border-color: rgba(61, 184, 245, 0.8);
            box-shadow: 0 0 20px rgba(61, 184, 245, 0.3);
            transform: translateY(-1px);
        }
        .os-icon {
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .os-icon svg {
            width: 100%;
            height: 100%;
        }

        .cart-button {
            position: relative;
            padding: 0.5rem;
            transition: all 0.3s ease;
        }

        .cart-button:hover {
            transform: translateY(-2px);
        }

        .cart-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: linear-gradient(135deg, #3DB8F5 0%, #2CA8E5 100%);
            color: white;
            border-radius: 999px;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            min-width: 1.5rem;
            height: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transform-origin: center;
            animation: cartBadgeAppear 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 0 10px rgba(61, 184, 245, 0.3);
        }

        @keyframes cartBadgeAppear {
            from {
                transform: scale(0);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .cart-button:hover .cart-badge {
            animation: cartBadgePulse 1s infinite;
        }

        @keyframes cartBadgePulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }
    </style>
</head>
<body class="text-white">
    <!-- Navigation -->
    <nav class="fixed w-full z-50 bg-[#0B0B1E]/80 backdrop-blur-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center space-x-3">
                        <svg class="w-8 h-8 text-primary" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Main circular frame -->
                            <circle cx="32" cy="32" r="30" stroke="currentColor" stroke-width="2" stroke-opacity="0.2"/>
                            
                            <!-- Animated trading line -->
                            <path d="M12 32C12 32 20 20 32 32C44 44 52 32 52 32" 
                                  stroke="currentColor" 
                                  stroke-width="3"
                                  stroke-linecap="round">
                                <animate attributeName="d" 
                                         dur="2s" 
                                         repeatCount="indefinite"
                                         values="M12 32C12 32 20 20 32 32C44 44 52 32 52 32;
                                                M12 32C12 32 20 44 32 32C44 20 52 32 52 32;
                                                M12 32C12 32 20 20 32 32C44 44 52 32 52 32"/>
                            </path>

                            <!-- Dots representing data points -->
                            <circle cx="32" cy="32" r="2" fill="currentColor">
                                <animate attributeName="cy"
                                         dur="2s"
                                         repeatCount="indefinite"
                                         values="32;20;32"/>
                            </circle>
                            <circle cx="22" cy="32" r="2" fill="currentColor" fill-opacity="0.6">
                                <animate attributeName="cy"
                                         dur="2s"
                                         repeatCount="indefinite"
                                         values="32;44;32"/>
                            </circle>
                            <circle cx="42" cy="32" r="2" fill="currentColor" fill-opacity="0.6">
                                <animate attributeName="cy"
                                         dur="2s"
                                         repeatCount="indefinite"
                                         values="32;20;32"/>
                            </circle>

                            <!-- Abstract tech elements -->
                            <path d="M32 8V14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M32 50V56" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M8 32H14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M50 32H56" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <span class="text-2xl logo-text gradient-text">Cryptotech X</span>
                    </a>
                </div>
                
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="nav-link text-gray-300 hover:text-white transition-colors font-medium">Home</a>
                    <a href="index.html#features" class="nav-link text-gray-300 hover:text-white transition-colors font-medium">Features</a>
                    <a href="shop.html" class="nav-link text-gray-300 hover:text-white transition-colors font-medium">Tokens</a>
                    <a href="contact.html" class="nav-link text-gray-300 hover:text-white transition-colors font-medium">Contact</a>
                    <div class="relative">
                        <a href="cart.html" class="cart-button group">
                            <div class="cart-container">
                                <svg class="w-6 h-6 text-gray-300 transition-transform group-hover:scale-110 group-hover:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/>
                                </svg>
                                <div class="cart-badge" id="cartCount">0</div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-32 pb-20 px-4">
        <div class="max-w-6xl mx-auto">
            <h1 class="text-4xl font-bold mb-12 text-center">Your Cart</h1>

            <!-- Cart Grid -->
            <div class="grid lg:grid-cols-2 gap-12">
                <!-- Left Column - Cart Items -->
                <div class="space-y-8">
                    <div id="cartItems" class="space-y-4">
                        <!-- Cart items will be inserted here -->
                    </div>

                    <div class="payment-option rounded-xl p-6 space-y-4">
                        <h3 class="text-xl font-semibold">Order Summary</h3>
                        <div class="space-y-2 text-gray-300">
                            <div class="flex justify-between">
                                <span>Subtotal</span>
                                <span id="subtotal">$0.00</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Volume Discount</span>
                                <span id="discount" class="text-[#3DB8F5]">-$0.00</span>
                            </div>
                            <div class="flex justify-between font-semibold text-white pt-2 border-t border-gray-700">
                                <span>Total</span>
                                <span id="total">$0.00</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Payment & Contact -->
                <div class="space-y-8">
                    <!-- Contact Information -->
                    <div class="payment-option rounded-xl p-6">
                        <h3 class="text-xl font-semibold mb-4">Contact Information</h3>
                        <form id="contactForm" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Name</label>
                                <input type="text" required class="w-full px-4 py-2 rounded-lg bg-[#0B0B1E] border border-gray-700 focus:border-[#3DB8F5] focus:outline-none">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Email</label>
                                <input type="email" required class="w-full px-4 py-2 rounded-lg bg-[#0B0B1E] border border-gray-700 focus:border-[#3DB8F5] focus:outline-none">
                            </div>
                        </form>
                    </div>

                    <!-- Payment Methods -->
                    <div class="payment-option rounded-xl p-6">
                        <h3 class="text-xl font-semibold mb-4">Payment Method</h3>
                        <div class="space-y-4">
                            <!-- Apple Pay -->
                            <button class="w-full payment-option rounded-lg p-4 flex items-center justify-between">
                                <span class="font-medium">Apple Pay</span>
                                <svg class="w-8 h-8" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17.0457 12.3181C17.0085 9.04346 19.7487 7.69264 19.8614 7.62797C18.4479 5.56164 16.1885 5.23047 15.4272 5.20047C13.4857 4.9993 11.6142 6.29047 10.6271 6.29047C9.61857 6.29047 8.0757 5.22547 6.4457 5.25547C4.31999 5.28547 2.32285 6.49047 1.22 8.34047C-1.04858 12.1005 0.684287 17.6605 2.85714 20.8505C3.92999 22.4005 5.20285 24.1405 6.89142 24.0905C8.52571 24.0305 9.13714 23.0505 11.1057 23.0505C13.0457 23.0505 13.6157 24.0905 15.3157 24.0505C17.0657 24.0205 18.1671 22.4805 19.2014 20.9105C20.4271 19.1205 20.9271 17.3705 20.9557 17.2705C20.9157 17.2605 17.0871 15.7905 17.0457 12.3181Z"/>
                                    <path d="M14.0328 3.87052C14.9028 2.80766 15.4971 1.34052 15.3371 -0.149481C14.0757 -0.0494813 12.5228 0.730519 11.6128 1.76052C10.8028 2.67052 10.0885 4.17052 10.2785 5.62052C11.6828 5.77052 13.1228 4.93052 14.0328 3.87052Z"/>
                                </svg>
                            </button>

                            <!-- Card Payment -->
                            <div class="payment-option rounded-lg p-4">
                                <div class="flex items-center justify-between mb-4">
                                    <span class="font-medium">Card Payment</span>
                                    <div class="flex space-x-2">
                                        <img src="https://www.vectorlogo.zone/logos/visa/visa-icon.svg" alt="Visa" class="h-8">
                                        <img src="https://www.vectorlogo.zone/logos/mastercard/mastercard-icon.svg" alt="Mastercard" class="h-8">
                                    </div>
                                </div>
                                <div id="card-element" class="bg-[#0B0B1E] rounded-lg p-4 border border-gray-700"></div>
                                <div id="card-errors" class="mt-2 text-red-500 text-sm"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Complete Purchase Button -->
                    <button id="purchaseBtn" class="w-full bg-[#3DB8F5] text-[#0B0B1E] py-4 rounded-xl font-bold text-lg hover:bg-[#3DB8F5]/90 transition-all">
                        Complete Purchase
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Initialize Stripe
        const stripe = Stripe('your_publishable_key');
        const elements = stripe.elements();
        const card = elements.create('card', {
            style: {
                base: {
                    color: '#fff',
                    fontFamily: 'Inter, sans-serif',
                    fontSize: '16px',
                    '::placeholder': {
                        color: '#6B7280',
                    },
                },
            },
        });
        card.mount('#card-element');

        // OS detection and icon update
        function detectOS() {
            const platform = navigator.platform.toLowerCase();
            const userAgent = navigator.userAgent.toLowerCase();
            
            let os = 'unknown';
            let icon = '';
            
            if (platform.includes('win') || userAgent.includes('windows')) {
                os = 'windows';
                icon = `<svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M0 3.449L9.75 2.1v9.451H0m10.949-9.602L24 0v11.4H10.949M0 12.6h9.75v9.451L0 20.699M10.949 12.6H24V24l-12.9-1.801"/>
                </svg>`;
            } else if (platform.includes('mac') || userAgent.includes('mac')) {
                os = 'mac';
                icon = `<svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                </svg>`;
            } else if (platform.includes('linux') || userAgent.includes('linux')) {
                os = 'linux';
                icon = `<svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12.504 0c-.155 0-.315.008-.48.021-4.226.333-3.105 4.807-3.17 6.298-.076 1.092-.3 1.953-1.05 3.02-.885 1.051-2.127 2.75-2.716 4.521-.278.832-.41 1.684-.287 2.489a.424.424 0 00-.11.135c-.26.268-.45.601-.663.839-.199.199-.485.267-.797.4-.313.136-.658.269-.864.68-.09.189-.136.394-.132.602 0 .199.027.4.055.536.058.399.116.728.04.97-.249.68-.28 1.145-.106 1.484.174.334.535.47.94.601.81.2 1.91.135 2.774.6.926.466 1.866.67 2.616.47.526-.116.97-.464 1.208-.946.587-.003 1.23-.269 2.26-.334.699-.058 1.574.267 2.577.2.025.134.063.198.114.333l.003.003c.391.778 1.113 1.132 1.884 1.071.771-.06 1.592-.536 2.257-1.306.631-.765 1.683-1.084 2.378-1.503.348-.199.629-.469.649-.853.023-.4-.2-.811-.714-1.376v-.097l-.003-.003c-.17-.2-.25-.535-.338-.926-.085-.401-.182-.786-.492-1.046h-.003c-.059-.054-.123-.067-.188-.135a.357.357 0 00-.19-.064c.431-1.278.264-2.55-.173-3.694-.533-1.41-1.465-2.638-2.175-3.483-.796-1.005-1.576-1.957-1.56-3.368.026-2.152.236-6.133-3.544-6.139zm.529 3.405h.013c.213 0 .396.062.584.198.19.135.33.332.438.533.105.259.158.459.166.724 0-.02.006-.04.006-.06v.105a.086.086 0 01-.004-.021l-.004-.024a1.807 1.807 0 01-.15.706.953.953 0 01-.213.335.71.71 0 00-.088-.042c-.104-.045-.198-.064-.284-.133a1.312 1.312 0 00-.22-.066c.05-.06.146-.133.183-.198.053-.128.082-.264.088-.402v-.02a1.21 1.21 0 00-.061-.4c-.045-.134-.101-.2-.183-.333-.084-.066-.167-.132-.267-.132h-.016c-.093 0-.176.03-.262.132a.8.8 0 00-.205.334 1.18 1.18 0 00-.09.4v.019c.002.089.008.179.02.267-.193-.067-.438-.135-.607-.202-.01-.065-.016-.132-.018-.199v-.02a1.844 1.844 0 01.12-.742 1.38 1.38 0 01.717-.733c.128-.067.27-.1.368-.1zm-2.183.667c.128 0 .27.032.4.132.146.053.27.152.374.252.104.09.183.2.284.334.01.008.022.02.034.03-.018.006-.035.014-.05.024-.08.054-.158.098-.25.135a2.757 2.757 0 00-.35.15 2.135 2.135 0 00.216-.536c.005-.02.01-.038.014-.058a1.229 1.229 0 00-.003-.331 1.465 1.465 0 00-.117-.334c-.085-.133-.182-.2-.262-.2h-.016c-.08 0-.147.067-.23.2a1.46 1.46 0 00-.149.334c-.05.134-.082.264-.095.331a2.135 2.135 0 00-.176.536.704.704 0 00-.016.058c-.087-.054-.18-.1-.27-.149a.933.933 0 01-.232-.135c.015-.01.027-.022.038-.03.102-.134.18-.244.284-.334.104-.1.228-.199.374-.252.13-.1.272-.132.4-.132z"/>
                </svg>`;
            }
            
            // Update all download buttons with the appropriate icon
            document.querySelectorAll('.download-btn').forEach(btn => {
                const iconSpan = btn.querySelector('.os-icon');
                if (iconSpan) {
                    iconSpan.innerHTML = icon;
                }
            });
        }

        // Handle cart functionality
        let cart = JSON.parse(localStorage.getItem('cart')) || {
            items: [],
            total: 0
        };

        function updateCartBadge() {
            const cartBadge = document.getElementById('cartCount');
            if (cartBadge) {
                const count = cart.items.length;
                cartBadge.textContent = count;
                
                // Remove and re-add animation class
                cartBadge.classList.remove('animate-cartBadgeAppear');
                void cartBadge.offsetWidth; // Trigger reflow
                cartBadge.classList.add('animate-cartBadgeAppear');
            }
        }

        function updateCart() {
            const cartItems = document.getElementById('cartItems');
            const subtotal = document.getElementById('subtotal');
            const discount = document.getElementById('discount');
            const total = document.getElementById('total');

            // Update cart badge
            updateCartBadge();

            // Clear existing items
            cartItems.innerHTML = '';

            // Add each item
            cart.items.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = 'payment-option rounded-xl p-4 flex items-center justify-between';
                itemElement.innerHTML = `
                    <div>
                        <h4 class="font-medium">${item.package} Package</h4>
                        <p class="text-sm text-gray-400">${item.tokens} tokens (${item.tokens} days of trading)</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span>$${item.price.toFixed(2)}</span>
                        <button onclick="removeItem(${index})" class="text-gray-400 hover:text-white">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                `;
                cartItems.appendChild(itemElement);
            });

            // Calculate totals
            const subtotalAmount = cart.items.reduce((sum, item) => sum + item.price, 0);
            let discountAmount = 0;
            const totalTokens = cart.items.reduce((sum, item) => sum + item.tokens, 0);

            if (totalTokens >= 100) {
                discountAmount = subtotalAmount * 0.2; // 20% discount
            } else if (totalTokens >= 50) {
                discountAmount = subtotalAmount * 0.1; // 10% discount
            }

            const totalAmount = subtotalAmount - discountAmount;

            subtotal.textContent = `$${subtotalAmount.toFixed(2)}`;
            discount.textContent = `-$${discountAmount.toFixed(2)}`;
            total.textContent = `$${totalAmount.toFixed(2)}`;
        }

        function removeItem(index) {
            cart.items.splice(index, 1);
            cart.total = cart.items.reduce((sum, item) => sum + item.price, 0);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCart();

            // Dispatch storage event for other tabs
            window.dispatchEvent(new StorageEvent('storage', {
                key: 'cart',
                newValue: JSON.stringify(cart)
            }));
        }

        // Add storage event listener to update cart badge when cart changes in other tabs
        window.addEventListener('storage', function(e) {
            if (e.key === 'cart') {
                cart = JSON.parse(e.newValue);
                updateCart();
            }
        });

        // Handle purchase
        document.getElementById('purchaseBtn').addEventListener('click', async (e) => {
            e.preventDefault();
            
            const form = document.getElementById('contactForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const button = e.target;
            button.disabled = true;
            button.textContent = 'Processing...';

            try {
                const { token, error } = await stripe.createToken(card);
                if (error) {
                    throw error;
                }

                // Here you would normally send the token to your server
                console.log('Payment successful!', token);
                
                // Clear cart and redirect to success page
                localStorage.removeItem('cart');
                window.location.href = 'completion.html';
            } catch (error) {
                document.getElementById('card-errors').textContent = error.message;
                button.disabled = false;
                button.textContent = 'Complete Purchase';
            }
        });

        // Initialize cart on page load
        document.addEventListener('DOMContentLoaded', function() {
            detectOS();
            updateCart();
        });
    </script>
</body>
</html> 